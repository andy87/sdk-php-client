# SDK Client Core

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ PHP SDK-—è–¥—Ä–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è API-–∫–ª–∏–µ–Ω—Ç–æ–≤, —Å —Ä–∞—Å—à–∏—Ä—è–µ–º–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π, –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –º–æ–∫–æ–≤ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏.
–°–¥–µ–ª–∞–Ω–æ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–∞–∫ –æ—Å–Ω–æ–≤–∞ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API.

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
composer require andy87/sdk-php-client
```

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
> ‚ö†Ô∏è –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ PHP 8.0+  
- ext-curl  
- ext-http  

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∏–µ–Ω—Ç
- **`SdkClient.php`** ‚Äî –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –∫–ª–∏–µ–Ω—Ç–∞, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∏–π –º–æ–¥—É–ª–∏, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –∏ –æ—Ç–ø—Ä–∞–≤–∫—É –∑–∞–ø—Ä–æ—Å–æ–≤.
  –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–ª–∞—Å—Å –ø—Ä–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ–¥ API –ø–∞—Ä—Ç–Ω—ë—Ä–∞.
---

### –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `base/components/Config.php` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞
- `base/components/Account.php` ‚Äî —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- `base/components/Prompt.php` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ API-–∑–∞–ø—Ä–æ—Å–∞
- `base/components/Schema.php` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ö–µ–º—ã –æ—Ç–≤–µ—Ç–∞
- `base/components/MockManager.php` ‚Äî –º–æ–∫-–æ—Ç–≤–µ—Ç—ã –∏ –∑–∞–≥–ª—É—à–∫–∏

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- `AuthorizationInterface`
- `RequestInterface`
- `ResponseInterface`
- `ClientInterface`
- `MockInterface`

### –ú–æ–¥—É–ª–∏
- `base/modules/*` ‚Äî –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –º–æ–¥—É–ª–∏: –ª–æ–≥–≥–µ—Ä, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç, –∫—ç—à, –º–æ–∫, —Ç–µ—Å—Ç

### –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç
- `transports/CurlTransport.php` ‚Äî –±–∞–∑–æ–≤—ã–π HTTP-–∫–ª–∏–µ–Ω—Ç –Ω–∞ –±–∞–∑–µ cURL

### –£—Ç–∏–ª–∏—Ç—ã `helpers/`
- `ContentType.php`
- `MethodRegistry.php`
- `Protocol.php`

### Core-—è–¥—Ä–æ
- `core/Modules.php` ‚Äî –º–µ–Ω–µ–¥–∂–µ—Ä –º–æ–¥—É–ª–µ–π
- `core/Container.php` ‚Äî DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- `core/ClassRegistry.php` ‚Äî –ø–æ–¥–º–µ–Ω–∞ –∫–ª–∞—Å—Å–æ–≤
- `core/transport/*` ‚Äî –¥–∞–Ω–Ω—ã–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∑–∞–ø—Ä–æ—Å–∞–º–∏ `Query`, `Request`, `Response`, `Url`

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ö–ª–∏–µ–Ω—Ç
```php

class CustomClient extends SdkClient
{
    // –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã —Å –ª–æ–≥–∏–∫–æ–π –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–∞—Ä—Ç–Ω—ë—Ä–∞.
    
    public function authorization( Account $account, bool $isGetFromCache = true ): bool {
        // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    }
    
    public function isTokenInvalid( Response $response ): bool {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –≤ –æ—Ç–≤–µ—Ç–µ–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–º —Ç–æ–∫–µ–Ω–µ
    }
    
    public function reAuthorization( Account $account ): bool {
        // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –µ—Å–ª–∏ –º–µ—Ç–æ–¥ `isTokenInvalid` –≤–µ—Ä–Ω—É–ª true
    }
}
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```php

use andy87\sdk\client\base\interfaces\ClientInterface;
use app\components\cusom\modules\CacheModule;
use app\components\cusom\prompts\CustomPrompt;
use app\components\cusom\mock\CustomPromptMock;

class CustomConfig extends Config
{
    // –ë–∞–∑–æ–≤—ã–µ, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–ª–∏–µ–Ω—Ç–∞
    protected string $protocol = Protocol::HTTPS; // –ü—Ä–æ—Ç–æ–∫–æ–ª ( –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `https` )
    protected string $host; // –•–æ—Å—Ç API, –Ω–∞–ø—Ä–∏–º–µ—Ä `api.example.com`

    // –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ, –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    protected ?string $prefix = null; // –ü—Ä–µ—Ñ–∏–∫—Å URL, –Ω–∞–ø—Ä–∏–º–µ—Ä `/api/v1`
    // –Ω–∞ –≤—ã—Ö–¥–µ –¥–ª—è Prompt::$path = 'example` –±—É–¥–µ—Ç `https://api.example.com/api/v1/example`'

    protected array $headers = []; // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

    // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∫–ª–∞—Å—Å–æ–≤
    protected array $registryOverrides = [
        ClientInterface::CACHE => CacheModule::class, // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–æ–¥—É–ª—è –∫—ç—à–∞
    ];

    // –ú–æ–∫-–æ—Ç–≤–µ—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è ( —Å–ø–∏—Å–æ–∫ –º–æ–∫–æ–≤ )
    protected array $mockList = [
        CustomPrompt::class => CustomPromptMock::class
    ];
    
    // –º–æ–∂–Ω–æ –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º —É—Å–ª–æ–≤–∏—è–º –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ Mock-–æ—Ç–≤–µ—Ç—ã
    // –∏—Å–ø–æ–ª—å–∑—É—è –º–µ—Ç–æ–¥ `updateMockList( MockInterface[] )`

}
```


### Prompt
Prompt –æ–±—ä–µ–∫—Ç—ã, –æ–ø–∏—Å—ã–≤–∞—é—Ç API-–∑–∞–ø—Ä–æ—Å—ã –∏ –∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.
```php
class CustomPrompt extends Prompt
{
    // –ë–∞–∑–æ–≤—ã–µ, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞.
    protected string $method = Method::GET; // –ú–µ—Ç–æ–¥ HTTP –∑–∞–ø—Ä–æ—Å–∞ ( –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `GET` )
    
    protected string $path = '/api/v1/resource'; // –ü—É—Ç—å –∫ —Ä–µ—Å—É—Ä—Å—É API ( –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ–Ω–µ—Ü `Config::$protocol`://`Config::$host`/`Config::$prefix`/{path} )

    protected string $schema; // –°—Ö–µ–º–∞ –æ—Ç–≤–µ—Ç–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä `CustomSchema::class` ( –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö )



    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ, –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    protected array $headers = []; // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ ( –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫ `Config::$headers` )

    protected ?string $contentType = –°ontentType::JSON; // –ó–Ω–∞—á–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º–æ–µ –≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫ 'Content-Type' ( –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `null` )

    protected ?string $mock = SomeMock::class; // –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω –∫–ª–∞—Å—Å –º–æ–∫-–æ—Ç–≤–µ—Ç–∞, –æ–Ω –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ ( –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `null` )



    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–æ–π     
    public const USE_PREFIX = false; // –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–µ—Ñ–∏–∫—Å–∞ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ ( –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `true` )

    public const APPLY_QUERY_TO_URL = true; // –ü—Ä–∏ `true` –¥–∞–Ω–Ω—ã–µ –∏–∑ query string –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ URL ( –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `false` )

    public const DEBUG = true; // –°—Ç–∞—Ç—É—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–µ–±–∞–≥ —Ä–µ–∂–∏–º–∞ ( –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `false` )

    public const AUTH = []; // –ú–∞—Å—Å–∏–≤ –∫–ª–∞—Å—Å–æ–≤, —Ä–µ–∞–ª–∏–∑—É—é—â–∏—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `AuthorizationInterface`, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.
}
```

### –°—Ö–µ–º–∞
–°—Ö–µ–º—ã –æ–ø–∏—Å—ã–≤–∞—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—Ç–≤–µ—Ç–∞ API –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö.
–°—Ö–µ–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–π, –∏ –º–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å –≤ —Å–µ–±—è –¥—Ä—É–≥–∏–µ —Å—Ö–µ–º—ã.
```php

class CustomSchema extends Schema
{
    // –ö–∞—Ä—Ç–∞ –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–π —Å–≤–æ–π—Å—Ç–≤ —Å –∏—Ö —Å—Ö–µ–º–∞–º–∏
    public const MAPPING = [ 
        'coordinates' => Coordinates::class, //–°—Ö–µ–º–∞ –¥–ª—è –ø–æ–ª—è `coordinates`, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ –∫–ª–∞—Å—Å–µ `Coordinates`
        'phones' => [Phones::class], // –ú–∞—Å—Å–∏–≤ —Å—Ö–µ–º –¥–ª—è –ø–æ–ª—è `phones`, –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –º–∞—Å—Å–∏–≤–∞ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–∞–∫ –æ–±—ä–µ–∫—Ç –∫–ª–∞—Å—Å–∞ `Phones`
    ];

    public string $id; // –ü–æ–ª–µ –±–µ–∑ —Å—Ö–µ–º—ã, –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –æ—Ç–≤–µ—Ç–∞ API

    public bool $required; // –ü–æ–ª–µ –±–µ–∑ —Å—Ö–µ–º—ã, –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –æ—Ç–≤–µ—Ç–∞ API

    /** @var array|sting[]  */
    public array $ids = []; // –ü–æ–ª–µ –±–µ–∑ —Å—Ö–µ–º—ã, –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –æ—Ç–≤–µ—Ç–∞ API
    
    
    // –°–≤–æ–π—Å—Ç–≤–∞ —Å–æ —Å—Ö–µ–º–∞–º–∏
    public Coordinates $coordinates; // –°—Ö–µ–º–∞ –¥–ª—è –ø–æ–ª—è `coordinates`, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ –∫–ª–∞—Å—Å–µ `Coordinates`

    /** @var array|Phones[]  */
    public array $phones = []; // –ú–∞—Å—Å–∏–≤ —Å—Ö–µ–º –¥–ª—è –ø–æ–ª—è `phones`, –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –º–∞—Å—Å–∏–≤–∞ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–∞–∫ –æ–±—ä–µ–∫—Ç –∫–ª–∞—Å—Å–∞ `Phones`

}
```

---

## üß© –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å

- –í—Å–µ –º–æ–¥—É–ª–∏, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ —Å—Ö–µ–º—ã –ø–æ–¥–º–µ–Ω—è–µ–º—ã —á–µ—Ä–µ–∑ `ClassRegistry` –∏–ª–∏ DI.
- –õ–æ–≥–∏–∫–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞, –∫—ç—à–∞, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –º–æ–∫–∞ –∞–±—Å—Ç—Ä–∞–≥–∏—Ä–æ–≤–∞–Ω–∞ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ –±–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã.

---

## ‚úÖ –¢–µ—Å—Ç—ã

–°–º–æ—Ç—Ä–∏ `tests/SdkClientTest.php` –∫–∞–∫ –ø—Ä–∏–º–µ—Ä.

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

---

## üë§ –ê–≤—Ç–æ—Ä

[and_y87](https://github.com/andy87)